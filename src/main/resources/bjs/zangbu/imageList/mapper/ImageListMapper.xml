<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bjs.zangbu.imageList.mapper.ImageListMapper">

    <!-- 이미지 정보 삽입 쿼리 -->
    <insert id="createImageList">
        INSERT INTO image_list (
        building_id,
        member_id,
        complex_id,
        image_url
        )
        VALUES (
        #{buildingId},
        #{memberId},
        #{complexId},
        #{imageUrl}
        )
    </insert>

    <!-- 특정 building_id에 해당하는 이미지 중 가장 오래된 이미지 1개 조회 -->
    <select id="representativeImage" resultType="String" parameterType="java.lang.Long">
        SELECT image_url
        FROM image_list
        WHERE building_id = #{buildingId}
        ORDER BY created_at
            LIMIT 1
    </select>

</mapper>
